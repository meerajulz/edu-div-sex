(()=>{var e={};e.id=607,e.ids=[607],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},2006:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>r.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var o=t(735),i=t(1232),s=t(2914),r=t.n(s),n=t(85),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(a,l);let d=["",{children:["actividad-2",{children:["scene3",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3974)),"/mnt/c/Users/ian.gilmore/Documents/repo/edu-div-sex/apps/web/src/app/actividad-2/scene3/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,1052)),"/mnt/c/Users/ian.gilmore/Documents/repo/edu-div-sex/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,8270,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,5335,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,4908,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/mnt/c/Users/ian.gilmore/Documents/repo/edu-div-sex/apps/web/src/app/actividad-2/scene3/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new o.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/actividad-2/scene3/page",pathname:"/actividad-2/scene3",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5705:(e,a,t)=>{Promise.resolve().then(t.bind(t,3974))},2329:(e,a,t)=>{Promise.resolve().then(t.bind(t,2272))},2272:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var o=t(2725),i=t(4621),s=t(3858),r=t(922),n=t(1616);let l={id:"juego_tres_actividad_2",title:"Privado vs P\xfablico",globalAudio:{titleGame:"/audio/actividad-2/juego3/title.mp3",buttonClick:"/audio/button/Bright.mp3",correct:"/audio/actividad-2/juego3/correcto.mp3",incorrect:"/audio/actividad-2/juego3/ops-respuesta-mal.mp3",tryAgain:"/audio/actividad-2/juego3/tryagain.mp3"},dropZones:{private:{id:"PRIVATE",name:"PRIVADO",color:"#ffb672",position:"left"},public:{id:"PUBLIC",name:"P\xdaBLICO",color:"#c1e3e4",position:"right"}},situations:[{id:"saludar_amigos",name:"Saludar a amigos",image:"/image/actividad_2/juego_3/PUB-saludar-amigos.png",dragAudio:"/audio/actividad-2/juego3/saludar-amigos.mp3",isPrivate:!1,correctAnswer:"PUBLIC",feedback:{audio:"/audio/actividad-2/juego3/text-saludar-amigos.mp3",correctText:"\xa1Muy bien! Saludar a amigos es algo que podemos hacer en espacios p\xfablicos.",incorrectText:"Ohhh, tu respuesta est\xe1 mal. Saludar a amigos es algo que podemos hacer en espacios p\xfablicos."}},{id:"cambiarse_ropa",name:"Cambiarse de ropa",image:"/image/actividad_2/juego_3/PRI-cambiarse-ropa.png",dragAudio:"/audio/actividad-2/juego3/cambioropa.mp3",isPrivate:!0,correctAnswer:"PRIVATE",feedback:{audio:"/audio/actividad-2/juego3/text-cambiar-ropa.mp3",correctText:"\xa1Muy bien! Cambiarse de ropa es algo que podemos hacer en espacios privados, en la habitaci\xf3n o en el ba\xf1o.",incorrectText:"Ohhh, tu respuesta est\xe1 mal. Cambiarse de ropa es algo privado. No lo hacemos en p\xfablico."}},{id:"besar_en_la_boca",name:"Besar en la boca",image:"/image/actividad_2/juego_3/PRI-besar-pareja.png",dragAudio:"/audio/actividad-2/juego3/besoboca.mp3",isPrivate:!0,correctAnswer:"PRIVATE",feedback:{audio:"/audio/actividad-2/juego3/text-beso-boca.mp3",correctText:"\xa1Muy bien! Besar en la boca es algo que podemos hacer en espacios privados cuando estamos solos con nuestra pareja.",incorrectText:"Ohhh, tu respuesta est\xe1 mal. Besar en la boca es algo que podemos hacer en espacios privados. No lo hacemos en p\xfablico. \xa1Int\xe9ntalo de nuevo!"}},{id:"besar_en_la_mejilla",name:"Besar en la mejilla",image:"/image/actividad_2/juego_3/PUB-dar-dos-besos.png",dragAudio:"/audio/actividad-2/juego3/besarmejilla.mp3",isPrivate:!1,correctAnswer:"PUBLIC",feedback:{audio:"/audio/actividad-2/juego3/text-besar-mejilla.mp3",correctText:"\xa1Muy bien! \xa1Muy bien! Besar en la mejilla es algo que podemos hacer en espacios p\xfablicos.",incorrectText:"Ohhh, tu respuesta est\xe1 mal. Besar en la mejilla es algo que podemos hacer en espacios p\xfablicos. \xa1Int\xe9ntalo de nuevo!"}},{id:"jugar_a_las_cartas",name:"Jugar a las cartas",image:"/image/actividad_2/juego_3/PUB_Jugar-cartas.png",dragAudio:"/audio/actividad-2/juego3/jugar.mp3",isPrivate:!1,correctAnswer:"PUBLIC",feedback:{audio:"/audio/actividad-2/juego3/text-jugar-cartas.mp3",correctText:"\xa1Muy bien! Jugar a las cartas es algo que podemos hacer en espacios p\xfablicos.",incorrectText:"Ohhh, tu respuesta est\xe1 mal. Jugar a las cartas es algo que hacemos en espacios p\xfablicos. \xa1Int\xe9ntalo de nuevo!"}},{id:"masturbarse_bano",name:"Masturbarse en el ba\xf1o",image:"/image/actividad_2/juego_3/PRI-Masturbarse.png",dragAudio:"/audio/actividad-2/juego3/masturbar-bano.mp3",isPrivate:!0,correctAnswer:"PRIVATE",feedback:{audio:"/audio/actividad-2/juego3/text-tocar-pene.mp3",correctText:"\xa1Muy bien! Tocarse (el pene o la vulva) es algo privado que hacemos en un lugar y momento en que estamos solos.",incorrectText:"Ohhh, tu respuesta est\xe1 mal. Tocarse (el pene o la vulva) es algo que podemos hacer en espacios privados. No lo hacemos en p\xfablico. \xa1Int\xe9ntalo de nuevo!"}},{id:"abrazarse",name:"Abrazarse",image:"/image/actividad_2/juego_3/PUB-saludar-amigos.png",dragAudio:"/audio/actividad-2/juego3/abrazo.mp3",isPrivate:!1,correctAnswer:"PUBLIC",feedback:{audio:"/audio/actividad-2/juego3/text-abrazo.mp3",correctText:"\xa1Muy bien! Abrazarse es algo que que podemos hacer en espacios p\xfablicos.",incorrectText:"Si es incorrecto: Ohhh, tu respuesta est\xe1 mal. Abrazarse es algo que podemos hacer en espacios p\xfablicos. \xa1Int\xe9ntalo de nuevo!"}}],timing:{dragAudioDelay:300,feedbackDuration:5e3,tryAgainDelay:2e3,titleAudioDelay:1e3},animations:{situationEntry:{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,ease:"easeOut"}},dropZoneHover:{scale:1.05,transition:{duration:.2}},dragItem:{scale:1.1,zIndex:1e3,transition:{duration:.2}}}},d=e=>{let a=[...e];for(let e=a.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[a[e],a[t]]=[a[t],a[e]]}return a},c=()=>{let[e,a]=(0,n.useState)(0),[t,o]=(0,n.useState)("loading"),[i,s]=(0,n.useState)(null),[r,c]=(0,n.useState)(!1),[u,p]=(0,n.useState)(0),[m,g]=(0,n.useState)(new Set),[b,h]=(0,n.useState)([]),[x,v]=(0,n.useState)(!1),[f,y]=(0,n.useState)({PRIVATE:[],PUBLIC:[]}),j=(0,n.useCallback)(()=>{console.log("\uD83D\uDD04 Resetting Drag & Drop game..."),a(0),o("loading"),s(null),c(!1),p(0),g(new Set),v(!1),y({PRIVATE:[],PUBLIC:[]});let e=d(l.situations);h(e),v(!0),console.log("\uD83D\uDD04 Game reset complete. Shuffled order:",e.map(e=>e.id))},[]),w=(0,n.useCallback)(()=>{m.size<l.situations.length?(o("playing"),s(null),c(!1),console.log("Ready for next situation. Completed:",m.size)):o("complete")},[m.size]);return{currentSituationIndex:e,setCurrentSituationIndex:a,gamePhase:t,setGamePhase:o,draggedItem:i,setDraggedItem:s,isCorrect:r,setIsCorrect:c,score:u,setScore:p,completedSituations:m,shuffledSituations:b,gameInitialized:x,droppedItems:f,resetGame:j,nextSituation:w,completeSituation:(0,n.useCallback)(e=>{g(a=>new Set([...a,e]))},[]),addDroppedItem:(0,n.useCallback)((e,a)=>{y(t=>({...t,[e]:[...t[e],a]}))},[]),removeDroppedItem:(0,n.useCallback)(e=>{y(a=>({PRIVATE:a.PRIVATE.filter(a=>a.id!==e),PUBLIC:a.PUBLIC.filter(a=>a.id!==e)}))},[])}},u=()=>{let e=(0,n.useRef)(null),a=(0,n.useCallback)((a,t)=>{let o=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return e.current={gameId:l.id,userId:a,sessionId:o,startTime:new Date,completed:!1,totalSituations:l.situations.length,correctAnswers:0,finalScore:0,situationsOrder:t||l.situations.map(e=>e.id)},e.current},[]),t=(0,n.useCallback)((a,t)=>(e.current&&(e.current.endTime=new Date,e.current.completed=a,e.current.correctAnswers=t,e.current.finalScore=Math.round(t/l.situations.length*100)),e.current),[]);return{currentSession:e.current,startSession:a,endSession:t}},p=()=>{let e=(0,n.useRef)([]);return{recordAttempt:(0,n.useCallback)((a,t,o,i,s,r)=>{let n={gameId:l.id,situationId:a,userId:s,sessionId:r,selectedZone:t,correctZone:o,isCorrect:t===o,isPrivate:i,timestamp:new Date};return e.current.push(n),console.log("\uD83C\uDFAE Situation Attempt Recorded:",n),n},[]),getAttempts:(0,n.useCallback)(()=>e.current,[]),clearAttempts:(0,n.useCallback)(()=>{e.current=[]},[])}},m=()=>{let e=(0,n.useRef)(null),a=(0,n.useCallback)(async(a,t=.7)=>{try{console.log("\uD83C\uDFB5 Playing audio:",a),e.current&&(e.current.pause(),e.current.currentTime=0);let o=new Audio(a);return o.volume=t,e.current=o,new Promise((e,t)=>{o.onended=()=>{console.log("\uD83C\uDFB5 Audio completed:",a),e()},o.onerror=e=>{console.warn("âŒ Audio error:",a,e),t(e)},o.play().catch(t)})}catch(e){throw console.warn("âŒ Error playing audio:",a,e),e}},[]),t=(0,n.useCallback)(async()=>{await a(l.globalAudio.buttonClick,.5)},[a]),o=(0,n.useCallback)(async()=>{await a(l.globalAudio.titleGame)},[a]),i=(0,n.useCallback)(async()=>{await a(l.globalAudio.correct)},[a]),s=(0,n.useCallback)(async()=>{await a(l.globalAudio.incorrect)},[a]),r=(0,n.useCallback)(async()=>{await a(l.globalAudio.tryAgain)},[a]),d=(0,n.useCallback)(async e=>{await a(e,.8)},[a]),c=(0,n.useCallback)(async e=>{await a(e)},[a]);return{playAudio:a,playButtonSound:t,playTitleAudio:o,playCorrectAudio:i,playIncorrectAudio:s,playTryAgainAudio:r,playDragAudio:d,playFeedbackAudio:c,stopAudio:(0,n.useCallback)(()=>{e.current&&(e.current.pause(),e.current.currentTime=0,e.current=null)},[])}},g=({onDrop:e,disabled:a=!1,droppedItems:t})=>{let[s,r]=(0,n.useState)(null),d=(e,t)=>{e.preventDefault(),a||r(t)},c=e=>{e.preventDefault(),r(null)},u=(t,o)=>{if(t.preventDefault(),a)return;let i=t.dataTransfer.getData("text/plain");i&&e(o,i),r(null)};return(0,o.jsxs)("div",{className:"flex justify-center gap-8 mb-8",children:[(0,o.jsxs)(i.P.div,{className:`
          relative flex-1 max-w-[50%] h-80 rounded-xl border-4 border-dashed
          flex flex-col items-center justify-center cursor-pointer
          transition-all duration-300
          ${"PRIVATE"===s?"border-orange-400 bg-orange-100 scale-105":"border-orange-300 bg-orange-50"}
          ${a?"opacity-50 cursor-not-allowed":""}
        `,style:{backgroundColor:`${l.dropZones.private.color}40`},onDragOver:e=>d(e,"PRIVATE"),onDragLeave:c,onDrop:e=>u(e,"PRIVATE"),whileHover:a?{}:l.animations.dropZoneHover,children:[(0,o.jsx)("div",{className:"absolute -top-28 -left-10 w-[180px] h-[180px] pointer-events-none z-10",style:{backgroundImage:"url('/image/actividad_2/juego_3/Candado_.png')",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),(0,o.jsx)("div",{className:"text-center mt-2",children:(0,o.jsx)("div",{className:"text-lg font-bold",style:{color:"#b45309"},children:l.dropZones.private.name})}),(0,o.jsx)("div",{className:"relative flex-1 w-full p-4",children:t.PRIVATE?.map((e,a)=>{let t=[{top:"10%",left:"15%",rotation:-5},{top:"20%",left:"60%",rotation:8},{top:"45%",left:"25%",rotation:-3},{top:"60%",left:"70%",rotation:6},{top:"35%",left:"45%",rotation:-8},{top:"75%",left:"20%",rotation:4},{top:"15%",left:"80%",rotation:-6}],s=t[a%t.length];return o.jsxs(i.P.div,{className:"absolute w-28 h-28 rounded-lg overflow-hidden border-2 border-green-400",style:{top:s.top,left:s.left,transform:`rotate(${s.rotation}deg)`,zIndex:5},initial:{scale:0,rotate:0},animate:{scale:1,rotate:s.rotation,transition:{delay:.1*a,type:"spring",stiffness:200,damping:15}},children:[o.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs",children:"âœ“"})})]},`dropped-${e.id}`)})}),"PRIVATE"===s&&(0,o.jsx)(i.P.div,{className:"absolute inset-0 bg-orange-200 rounded-xl opacity-50",initial:{scale:0},animate:{scale:1},transition:{duration:.2}})]}),(0,o.jsxs)(i.P.div,{className:`
           relative flex-1 max-w-[50%] h-80 rounded-xl border-4 border-dashed
          flex flex-col items-center justify-center cursor-pointer
          transition-all duration-300
          ${"PUBLIC"===s?"border-blue-400 bg-blue-100 scale-105":"border-blue-300 bg-blue-50"}
          ${a?"opacity-50 cursor-not-allowed":""}
        `,style:{backgroundColor:`${l.dropZones.public.color}40`},onDragOver:e=>d(e,"PUBLIC"),onDragLeave:c,onDrop:e=>u(e,"PUBLIC"),whileHover:a?{}:l.animations.dropZoneHover,children:[(0,o.jsx)("div",{className:"absolute -top-28 -right-0 w-[180px] h-[180px] pointer-events-none z-10",style:{backgroundImage:"url('/image/actividad_2/juego_3/ok_.png')",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),(0,o.jsx)("div",{className:"text-center mt-2",children:(0,o.jsx)("div",{className:"text-lg font-bold",style:{color:"#1e3a8a"},children:l.dropZones.public.name})}),(0,o.jsx)("div",{className:"relative flex-1 w-full p-4",children:t.PUBLIC?.map((e,a)=>{let t=[{top:"15%",left:"20%",rotation:7},{top:"30%",left:"65%",rotation:-4},{top:"50%",left:"30%",rotation:9},{top:"25%",left:"75%",rotation:-7},{top:"65%",left:"15%",rotation:3},{top:"40%",left:"55%",rotation:-5},{top:"70%",left:"70%",rotation:8}],s=t[a%t.length];return o.jsxs(i.P.div,{className:"absolute w-28 h-28 rounded-lg overflow-hidden border-2 border-green-400",style:{top:s.top,left:s.left,transform:`rotate(${s.rotation}deg)`,zIndex:5},initial:{scale:0,rotate:0},animate:{scale:1,rotate:s.rotation,transition:{delay:.1*a,type:"spring",stiffness:200,damping:15}},children:[o.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs",children:"âœ“"})})]},`dropped-${e.id}`)})}),"PUBLIC"===s&&(0,o.jsx)(i.P.div,{className:"absolute inset-0 bg-blue-200 rounded-xl opacity-50",initial:{scale:0},animate:{scale:1},transition:{duration:.2}})]})]})},b=({situations:e,completedSituations:a,onDragStart:t,disabled:s=!1})=>{let[r,d]=(0,n.useState)(null),c=(e,o)=>{s||a.has(o)||(e.dataTransfer.setData("text/plain",o),d(o),t(o))},u=()=>{d(null)};return(0,o.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 z-20",children:(0,o.jsxs)("div",{className:"rounded-2xl p-1 shadow-lg border-4 border-blue-300",children:[(0,o.jsx)("div",{className:"text-center mb-4",children:(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Arrastra las situaciones a las categor\xedas"})}),(0,o.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:e.map(t=>{let n=a.has(t.id),d=r===t.id;return(0,o.jsx)(i.P.div,{className:`
                  relative flex-shrink-0 w-32 h-32 overflow-hidden
                  transition-all duration-300
                  ${n?"opacity-75 cursor-not-allowed":"cursor-grab"}
                  ${d?"opacity-50 scale-110":""}
                  ${s?"cursor-not-allowed opacity-50":""}
                `,style:{pointerEvents:n?"none":"auto",zIndex:n?1:10},initial:l.animations.situationEntry.initial,animate:l.animations.situationEntry.animate,transition:{...l.animations.situationEntry.transition,delay:.1*e.indexOf(t)},whileHover:s||n?{}:{scale:1.05},whileTap:s||n?{}:{scale:.95},children:(0,o.jsxs)("div",{draggable:!s&&!n,onDragStart:e=>c(e,t.id),onDragEnd:u,onContextMenu:e=>e.preventDefault(),className:"w-full h-full",children:[(0,o.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover",draggable:!1}),n&&(0,o.jsx)("div",{className:"absolute inset-0 bg-green-500/30 flex items-center justify-center pointer-events-none",children:(0,o.jsx)("div",{className:"text-2xl",children:"âœ…"})}),!n&&(0,o.jsx)("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2    bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0    group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:t.name})]})},t.id)})}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:["Completado: ",a.size," / ",e.length]})})]})})};var h=t(6994);let x=({isVisible:e,onClose:a,onGameComplete:t,userId:s})=>{let{gamePhase:d,setGamePhase:x,draggedItem:v,setDraggedItem:f,score:y,setScore:j,completedSituations:w,shuffledSituations:P,gameInitialized:A,droppedItems:C,resetGame:N,completeSituation:I,addDroppedItem:k}=c(),{currentSession:_,startSession:T,endSession:D}=u(),{recordAttempt:S}=p(),{playTitleAudio:z,playCorrectAudio:E,playIncorrectAudio:R,playTryAgainAudio:M,playDragAudio:q,playFeedbackAudio:B,stopAudio:$}=m();(0,n.useEffect)(()=>{e&&N()},[e,N]),(0,n.useEffect)(()=>{e&&A&&P.length>0?(console.log("\uD83C\uDFAE Starting drag & drop game with situations:",P.map(e=>e.id)),T(s,P.map(e=>e.id)),setTimeout(async()=>{await z(),setTimeout(()=>{x("playing")},1e3)},l.timing.titleAudioDelay)):e||$()},[e,A,P.length,s,T,z,x,$]);let U=async e=>{if("playing"!==d)return;f(e);let a=P.find(a=>a.id===e);a&&(console.log("\uD83C\uDFAE Dragging situation:",a.name),setTimeout(async()=>{await q(a.dragAudio)},l.timing.dragAudioDelay))},O=async(e,a)=>{if("playing"!==d)return;let t=P.find(e=>e.id===a);if(!t)return;console.log(`ðŸŽ® Dropped ${t.name} on ${e} zone`);let o=e===t.correctAnswer;S(t.id,e,t.correctAnswer,t.isPrivate,s,_?.sessionId),o?(k(e,t),I(a),j(e=>e+1),await E(),setTimeout(async()=>{await B(t.feedback.audio);let e=w.size;console.log(`ðŸŽ® Current completed: ${e}, Total situations: ${l.situations.length}`),e+1>=l.situations.length&&(console.log("\uD83C\uDFAE All situations completed! Showing celebration..."),setTimeout(()=>{x("celebrating")},1e3))},1e3)):(await R(),setTimeout(async()=>{await B(t.feedback.audio),setTimeout(async()=>{await M()},500)},1e3)),f(null)};return((0,n.useEffect)(()=>{"playing"===d&&w.size>=l.situations.length&&(console.log("\uD83C\uDFAE Game completed via effect! Showing celebration..."),setTimeout(()=>{x("celebrating")},2e3))},[w.size,d]),e)?(0,o.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"transparent"},children:(0,o.jsxs)(i.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3,ease:"easeOut"},className:"relative w-full h-full max-w-[1024px] max-h-[720px] rounded-2xl shadow-2xl pointer-events-auto overflow-hidden",style:{background:"linear-gradient(to right, #fdfad6, #d4fff7)"},children:[(0,o.jsx)("div",{className:"absolute inset-0 w-full h-full bg-contain bg-center bg-no-repeat opacity-1",style:{backgroundImage:"url('/image/actividad_2/juego_3/bg.png')"}}),(0,o.jsx)("button",{onClick:()=>{console.log("\uD83C\uDFAE Closing modal..."),$(),D(!1,y),N(),a()},className:"absolute top-4 right-4 z-10 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg shadow-lg flex items-center justify-center transition-all duration-200 hover:scale-105 font-semibold",children:"Salir juego"}),!1,"loading"===d&&(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-gray-800 text-xl font-bold text-center",children:[(0,o.jsxs)("div",{className:"text-2xl mb-4",children:["\uD83C\uDFAE ",l.title]}),(0,o.jsx)("div",{className:"w-16 h-16 border-4 border-blue-400/30 border-t-blue-500 rounded-full animate-spin mx-auto"})]})}),"playing"===d&&(0,o.jsxs)("div",{className:"relative h-full p-8 pb-32",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\xbfQu\xe9 es privado y qu\xe9 es p\xfablico?"}),(0,o.jsx)("p",{className:"text-lg text-gray-600",children:"Arrastra las situaciones a la categor\xeda correcta"})]}),(0,o.jsx)(g,{onDrop:O,disabled:"playing"!==d,droppedItems:C,situations:P}),(0,o.jsx)("div",{className:"text-center mb-4",style:{display:"none"},children:(0,o.jsx)("p",{className:"text-md text-gray-700 bg-white/70 px-4 py-2 rounded-full inline-block",children:"\uD83D\uDD12 Privado: cosas que hacemos en espacios privados | \uD83C\uDF0D P\xfablico: cosas que hacemos en espacios p\xfablicos"})})]}),"playing"===d&&(0,o.jsx)(b,{situations:P,completedSituations:w,onDragStart:U,disabled:"playing"!==d}),"celebrating"===d&&(0,o.jsx)(h.A,{onComplete:()=>{console.log("\uD83C\uDFAE Celebration completed! Closing modal and going to scene..."),D(!0,y),t&&t(),a()}}),"complete"===d&&(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-40",children:(0,o.jsx)(i.P.div,{animate:{scale:[1,1.3,1],rotate:[0,-360]},transition:{duration:.8,ease:"easeInOut"},children:(0,o.jsx)(r.A,{onClick:()=>{console.log("\uD83C\uDFAE Handling final game completion..."),D(!0,y),t&&t(),a()},disabled:!1})})})]})}):null};var v=t(207);function f(){let e=(0,v.useRouter)(),a=(0,n.useRef)(null),[t,l]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1),[b,h]=(0,n.useState)(!1),[f,y]=(0,n.useState)({width:0,height:0}),[j,w]=(0,n.useState)({width:0,height:0}),P={width:`${f.width}px`,height:`${f.height}px`,left:`${(j.width-f.width)/2}px`,top:`${(j.height-f.height)/2}px`},A=()=>{try{let e=new Audio("/audio/button/Bright.mp3");e.volume=.7,e.play().catch(console.warn)}catch(e){console.warn("Could not play sound:",e)}},C=()=>{l(!0),A(),setTimeout(()=>{l(!1),p(!0)},800)},N=()=>{l(!0),A(),setTimeout(()=>{l(!1),e.push("/actividad-2/scene4")},800)};return(0,o.jsxs)(i.P.div,{className:"relative min-h-screen overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[(0,o.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-green-600 via-blue-300 to-purple-300 z-0"}),(0,o.jsx)("div",{className:"absolute inset-0 z-10",children:[...Array(20)].map((e,a)=>(0,o.jsx)(i.P.div,{className:"absolute rounded-full bg-white/10",style:{width:60*Math.random()+20,height:60*Math.random()+20,left:`${100*Math.random()}%`,top:`${100*Math.random()}%`},animate:{y:[0,-20,0],x:[0,20*Math.random()-10,0],scale:[1,1.1,1]},transition:{duration:3*Math.random()+2,repeat:1/0,ease:"easeInOut",delay:2*Math.random()}},a))}),(0,o.jsx)("div",{className:"absolute top-0 right-0 z-50 flex",children:(0,o.jsx)(s.A,{})}),d||m?d&&!m?(0,o.jsx)("div",{className:"absolute",style:P,children:(0,o.jsx)("video",{ref:a,className:"absolute inset-0 w-full h-full object-cover z-20",src:"/video/ACTIVIDAD-2-ESCENA-3.mp4",autoPlay:!0,playsInline:!0,onEnded:()=>{g(!0)}})}):m?(0,o.jsx)("div",{className:"relative z-20 flex items-center justify-center min-h-screen",children:(0,o.jsx)(i.P.div,{animate:t?{scale:[1,1.3,1],rotate:[0,-360]}:{},transition:{duration:.8,ease:"easeInOut"},children:(0,o.jsx)(r.A,{onClick:()=>{b?N():C()},disabled:t})})}):null:(0,o.jsx)("div",{className:"relative z-20 flex items-center justify-center min-h-screen",children:(0,o.jsx)(i.P.div,{animate:t?{scale:[1,1.3,1],rotate:[0,-360]}:{},transition:{duration:.8,ease:"easeInOut"},children:(0,o.jsx)(r.A,{onClick:()=>{t||(l(!0),A(),setTimeout(()=>{l(!1),c(!0)},800))},disabled:t})})}),(0,o.jsx)(x,{isVisible:u,onClose:()=>{p(!1)},onGameComplete:()=>{console.log("Game 3 completed!"),p(!1),h(!0),g(!0)},userId:"user123"})]})}},6994:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var o=t(2725),i=t(1616),s=t(4621);let r={animate:{scale:[0,1.5,0],opacity:[0,1,0],transition:{duration:1.2,repeat:1/0,ease:"easeInOut"}}},n=({isVisible:e=!0,onComplete:a,duration:t=2e3})=>{let n=(0,i.useRef)(!1);return((0,i.useEffect)(()=>{if(!e)return;n.current||(n.current=!0,new Audio("/audio/actividad-1/escena_2/elements/muy_bien_bright.mp3").play().catch(console.warn));let o=setTimeout(()=>{a()},t);return()=>clearTimeout(o)},[a,t,e]),(0,i.useEffect)(()=>{e||(n.current=!1)},[e]),e)?(0,o.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50 pointer-events-none",children:(0,o.jsxs)("div",{className:"relative w-full h-full",children:[[...Array(25)].map((e,a)=>(0,o.jsx)(s.P.div,{className:"absolute w-4 h-4 bg-yellow-300 rounded-full",style:{top:`${100*Math.random()}%`,left:`${100*Math.random()}%`},variants:r,animate:"animate"},a)),(0,o.jsx)(s.P.div,{className:"absolute top-1/2 left-[1/2] text-white text-5xl font-bold drop-shadow-xl",style:{transform:"translate(-50%, -50%)"},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"easeOut"},children:"\uD83C\uDF89 \xa1Muy bien!"})]})}):null}},3974:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});let o=(0,t(2771).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/c/Users/ian.gilmore/Documents/repo/edu-div-sex/apps/web/src/app/actividad-2/scene3/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/c/Users/ian.gilmore/Documents/repo/edu-div-sex/apps/web/src/app/actividad-2/scene3/page.tsx","default")}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),o=a.X(0,[207,619,178,40,165,772],()=>t(2006));module.exports=o})();