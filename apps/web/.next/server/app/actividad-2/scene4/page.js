(()=>{var e={};e.id=226,e.ids=[226],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},8567:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>r.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>l});var i=a(735),o=a(1232),s=a(2914),r=a.n(s),n=a(85),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(t,c);let l=["",{children:["actividad-2",{children:["scene4",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7611)),"/mnt/c/Users/ian.gilmore/Documents/repo/edu-div-sex/apps/web/src/app/actividad-2/scene4/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,1052)),"/mnt/c/Users/ian.gilmore/Documents/repo/edu-div-sex/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,8270,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,5335,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,4908,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/mnt/c/Users/ian.gilmore/Documents/repo/edu-div-sex/apps/web/src/app/actividad-2/scene4/page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/actividad-2/scene4/page",pathname:"/actividad-2/scene4",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},4412:(e,t,a)=>{Promise.resolve().then(a.bind(a,7611))},1260:(e,t,a)=>{Promise.resolve().then(a.bind(a,4093))},4093:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var i=a(2725),o=a(4621),s=a(3125),r=a(207),n=a(3858),c=a(922),l=a(1616);let d={id:"juego_cuatro_actividad_2",title:"\xbfQu\xe9 hacer si alguien no respeta tu intimidad?",globalAudio:{title:"/audio/actividad-2/juego4/title.mp3",congratulations:"/audio/actividad-2/juego4/muybien.mp3",animationSound:"/audio/button/Bright.mp3"},feedbackImages:{correct:"/image/actividad_2/juego_4/ok.png",incorrect:"/image/actividad_2/juego_4/no.png"},situations:[{id:"situation_1",title:"Situaci\xf3n 1",description:"Alguien toca la puerta del ba\xf1o mientras Marta se est\xe1 cambi\xe1ndose. \xbfQu\xe9 debe hacer Marta?",images:{situation:"/image/actividad_2/juego_4/Caso_1_situation.png",correct:"/image/actividad_2/juego_4/Caso_1_correct.png",incorrect:"/image/actividad_2/juego_4/Caso_1_incorrect.png"},audio:{situation:"/audio/actividad-2/juego4/situation1.mp3",correct:"/audio/actividad-2/juego4/s_1_c_1_correct.mp3",correctFeedback:"/audio/actividad-2/juego4/s_1_c_1_correct_feedback.mp3",incorrect:"/audio/actividad-2/juego4/s_1_c_1_incorrect.mp3",incorrectFeedback:"/audio/actividad-2/juego4/s_1_c_1_incorrect_feedback.mp3"},options:{correct:"Decir: Espera, estoy cambi\xe1ndome.",incorrect:"No decir nada y dejar que entre."},feedback:{correct:'\xa1Muy bien! Decir "Espera" es la mejor opci\xf3n. Tu intimidad es importante.',incorrect:"Recuerda, siempre debes decir algo si alguien intenta entrar mientras est\xe1s cambi\xe1ndote."}},{id:"situation_2",title:"Situaci\xf3n 2",description:"Pepe intenta besar a Marta en el parque. \xbfQu\xe9 debe hacer Marta?",images:{situation:"/image/actividad_2/juego_4/Caso_2_situation.png",correct:"/image/actividad_2/juego_4/Caso_2_correct.png",incorrect:"/image/actividad_2/juego_4/Caso_2_incorrect.png"},audio:{situation:"/audio/actividad-2/juego4/situation2.mp3",correct:"/audio/actividad-2/juego4/s_2_c_2_correct.mp3",correctFeedback:"/audio/actividad-2/juego4/s_2_c_2_correct_feedback.mp3",incorrect:"/audio/actividad-2/juego4/s_2_c_2_incorrect.mp3",incorrectFeedback:"/audio/actividad-2/juego4/s_2_c_2_incorrect_feedback.mp3"},options:{correct:"No, el parque es un lugar p\xfablico.",incorrect:"No decir nada y aceptar el beso."},feedback:{correct:"\xa1Exacto! Decir no, si no es el lugar adecuado, est\xe1 bien.",incorrect:"Recuerda, puedes decir lo que sientes. \xa1Tu cuerpo es tuyo!"}},{id:"situation_3",title:"Situaci\xf3n 3",description:"Alex y Dani siempre van juntos a todas partes. Un desconocido le ha preguntado a Alex si son novios. \xbfQu\xe9 debe contestar Alex?",images:{situation:"/image/actividad_2/juego_4/Caso_3_situation.png",correct:"/image/actividad_2/juego_4/Caso_3_2_correct.png",incorrect:"/image/actividad_2/juego_4/Caso_3_3_incorrect.png"},audio:{situation:"/audio/actividad-2/juego4/situation3.mp3",correct:"/audio/actividad-2/juego4/s_3_c_3_correct.mp3",correctFeedback:"/audio/actividad-2/juego4/s_3_c_3_correct_feedback.mp3",incorrect:"/audio/actividad-2/juego4/s_3_c_3_incorrect.mp3",incorrectFeedback:"/audio/actividad-2/juego4/s_3_c_3_incorrect_feedback.mp3"},options:{correct:"Prefiero no hablar de eso.",incorrect:"Le cuente todo."},feedback:{correct:"\xa1Exacto! No tienes que compartir todo con cualquiera.",incorrect:"Vuelve a intentarlo. Recuerda que hay informaci\xf3n que nos guardamos para nosotros y no le contamos a desconocidos."}}],timing:{titleAudioDelay:5e3,situationImageDelay:100,optionsDelay:800,feedbackImageDelay:200,feedbackAudioDelay:800,nextSituationDelay:4e3,congratsDelay:1e3,retryDelay:6500},animations:{situationImage:{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"easeOut"}},optionImages:{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"}},feedbackImage:{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.4,ease:"easeOut"}}}},u=()=>{let[e,t]=(0,l.useState)({currentSituationIndex:0,phase:"intro",selectedAnswer:null,isCorrect:null,attempts:0,showFeedbackImage:!1,gameCompleted:!1}),[a,i]=(0,l.useState)({gameId:d.id,sessionId:`session_${Date.now()}`,startTime:new Date,completed:!1,totalSituations:d.situations.length,correctAnswersFirstTry:0,totalAttempts:0,finalScore:0}),o=(0,l.useRef)(null),s=(0,l.useRef)([]),r=(0,l.useCallback)(e=>new Promise(t=>{o.current&&(o.current.pause(),o.current=null);let a=new Audio(e);o.current=a,a.onended=()=>{o.current=null,t()},a.onerror=()=>{console.warn("Audio failed to load:",e),o.current=null,t()},a.play().catch(()=>{console.warn("Audio failed to play:",e),o.current=null,t()})}),[]),n=(0,l.useCallback)(e=>{try{let t=new Audio(e);t.volume=.7,t.play().catch(console.warn)}catch(e){console.warn("Could not play sound:",e)}},[]),c=(0,l.useCallback)(async()=>{i(e=>({...e,startTime:new Date})),await r(d.globalAudio.title);let e=setTimeout(()=>{t(e=>({...e,phase:"situation"}))},d.timing.titleAudioDelay);s.current.push(e)},[r]),u=(0,l.useCallback)(async()=>{let a=d.situations[e.currentSituationIndex];n(d.globalAudio.animationSound),await r(a.audio.situation);let i=setTimeout(()=>{t(e=>({...e,phase:"options"}))},d.timing.optionsDelay);s.current.push(i)},[e.currentSituationIndex,r,n]),m=(0,l.useCallback)(async a=>{let o=d.situations[e.currentSituationIndex],c="correct"===a,l=e.attempts+1;t(e=>({...e,selectedAnswer:a,isCorrect:c,attempts:l,phase:"feedback"})),i(e=>({...e,totalAttempts:e.totalAttempts+1,correctAnswersFirstTry:c&&1===l?e.correctAnswersFirstTry+1:e.correctAnswersFirstTry}));let u=c?o.audio.correct:o.audio.incorrect;await r(u),t(e=>({...e,showFeedbackImage:!0})),n(d.globalAudio.animationSound);let m=setTimeout(async()=>{let a=c?o.audio.correctFeedback:o.audio.incorrectFeedback;if(await r(a),c){let a=setTimeout(()=>{e.currentSituationIndex<d.situations.length-1?t(e=>({currentSituationIndex:e.currentSituationIndex+1,phase:"situation",selectedAnswer:null,isCorrect:null,attempts:0,showFeedbackImage:!1,gameCompleted:!1})):(t(e=>({...e,gameCompleted:!0,phase:"completed"})),i(e=>({...e,completed:!0,endTime:new Date,finalScore:Math.round(e.correctAnswersFirstTry/e.totalSituations*100)})))},d.timing.nextSituationDelay);s.current.push(a)}else{let e=setTimeout(()=>{t(e=>({...e,phase:"options",selectedAnswer:null,isCorrect:null,showFeedbackImage:!1}))},d.timing.retryDelay);s.current.push(e)}},d.timing.feedbackImageDelay);s.current.push(m)},[e.currentSituationIndex,e.attempts,r,n]);(0,l.useEffect)(()=>{"situation"===e.phase&&u()},[e.phase,u]),(0,l.useEffect)(()=>()=>{o.current&&o.current.pause(),s.current.forEach(e=>clearTimeout(e)),s.current=[]},[]);let p=(0,l.useCallback)(()=>d.situations[e.currentSituationIndex],[e.currentSituationIndex]);return{gameState:e,sessionData:a,getCurrentSituation:p,startGame:c,handleAnswerClick:m,resetGame:(0,l.useCallback)(()=>{o.current&&o.current.pause(),s.current.forEach(e=>clearTimeout(e)),s.current=[],t({currentSituationIndex:0,phase:"intro",selectedAnswer:null,isCorrect:null,attempts:0,showFeedbackImage:!1,gameCompleted:!1}),i({gameId:d.id,sessionId:`session_${Date.now()}`,startTime:new Date,completed:!1,totalSituations:d.situations.length,correctAnswersFirstTry:0,totalAttempts:0,finalScore:0})},[]),config:d}},m={animate:{scale:[0,1.5,0],opacity:[0,1,0],transition:{duration:1.2,repeat:1/0,ease:"easeInOut"}}},p=({onComplete:e})=>{let t=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{t.current||(t.current=!0,new Audio("/audio/actividad-2/juego4/muybien.mp3").play().catch(console.warn));let a=setTimeout(()=>{e()},2e3);return()=>clearTimeout(a)},[e]),(0,i.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50 pointer-events-none",children:(0,i.jsxs)("div",{className:"relative w-full h-full",children:[[...Array(25)].map((e,t)=>(0,i.jsx)(o.P.div,{className:"absolute w-4 h-4 bg-yellow-300 rounded-full",style:{top:`${100*Math.random()}%`,left:`${100*Math.random()}%`},variants:m,animate:"animate"},t)),(0,i.jsx)(o.P.div,{className:"absolute top-1/2 left-1/2 text-white text-5xl font-bold drop-shadow-xl",style:{transform:"translate(-50%, -50%)"},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"easeOut"},children:"\uD83C\uDF89 \xa1Muy bien!"})]})})};function g({isOpen:e,onClose:t}){let{gameState:a,getCurrentSituation:r,startGame:n,handleAnswerClick:c,resetGame:l,config:d}=u();if(!e)return null;let m=r(),g=()=>{l(),t()};return(0,i.jsxs)(o.P.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,i.jsx)(o.P.div,{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},onClick:g}),(0,i.jsxs)(o.P.div,{className:"relative w-full max-w-[1000px] max-h-[800px] h-full bg-gradient-to-b from-[#fffad3] to-[#f3ffae] rounded-2xl shadow-2xl overflow-hidden",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3,ease:"easeOut"},children:[(0,i.jsx)("button",{onClick:g,className:"absolute top-4 right-4 z-10 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg shadow-lg flex items-center justify-center transition-all duration-200 hover:scale-105 font-semibold",children:"Salir juego"}),(0,i.jsxs)("div",{className:"w-full h-full p-6 pt-16 flex flex-col",children:["intro"===a.phase&&(0,i.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:d.title}),(0,i.jsx)("div",{className:"text-lg text-gray-600",children:"Preparando el juego..."})]})}),"situation"===a.phase&&m&&(0,i.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,i.jsx)(s.N,{children:(0,i.jsx)(o.P.div,{className:"text-center",...d.animations.situationImage,children:(0,i.jsx)("img",{src:m.images.situation,alt:m.title,className:"max-w-full max-h-[500px] object-contain mx-auto"})},`situation-${a.currentSituationIndex}`)})}),"options"===a.phase&&m&&(0,i.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl",children:(0,i.jsxs)(s.N,{children:[(0,i.jsx)(o.P.div,{className:"cursor-pointer",...d.animations.optionImages,transition:{...d.animations.optionImages.transition,delay:.1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c("correct"),children:(0,i.jsx)("img",{src:m.images.correct,alt:"Opci\xf3n correcta",className:"w-full max-h-[300px] object-contain  duration-200"})},`correct-${a.currentSituationIndex}`),(0,i.jsx)(o.P.div,{className:"cursor-pointer",...d.animations.optionImages,transition:{...d.animations.optionImages.transition,delay:.2},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c("incorrect"),children:(0,i.jsx)("img",{src:m.images.incorrect,alt:"Opci\xf3n incorrecta",className:"w-full max-h-[300px] object-contain duration-200"})},`incorrect-${a.currentSituationIndex}`)]})})}),"feedback"===a.phase&&m&&(0,i.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,i.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl",children:[(0,i.jsx)("div",{className:`${"correct"===a.selectedAnswer?"ring-4 ring-green-400 rounded-lg":"opacity-50"}`,children:(0,i.jsx)("img",{src:m.images.correct,alt:"Opci\xf3n correcta",className:"w-full max-h-[300px] object-contain rounded-lg"})}),(0,i.jsx)("div",{className:`${"incorrect"===a.selectedAnswer?"ring-4 ring-red-400 rounded-lg":"opacity-50"}`,children:(0,i.jsx)("img",{src:m.images.incorrect,alt:"Opci\xf3n incorrecta",className:"w-full max-h-[300px] object-contain rounded-lg"})})]})}),(0,i.jsx)(s.N,{children:a.showFeedbackImage&&null!==a.isCorrect&&(0,i.jsx)("div",{className:"flex justify-center mb-4",children:(0,i.jsx)(o.P.div,{className:"z-20",...d.animations.feedbackImage,children:(0,i.jsx)("img",{src:a.isCorrect?d.feedbackImages.correct:d.feedbackImages.incorrect,alt:a.isCorrect?"Correcto":"Incorrecto",className:"w-24 h-24 object-contain"})})})})]}),"intro"!==a.phase&&"completed"!==a.phase&&(0,i.jsx)("div",{className:"mt-4 flex justify-center",children:(0,i.jsx)("div",{className:"flex space-x-2",children:d.situations.map((e,t)=>(0,i.jsx)("div",{className:`w-3 h-3 rounded-full transition-colors duration-200 ${t<a.currentSituationIndex?"bg-green-500":t===a.currentSituationIndex?"bg-blue-500":"bg-gray-300"}`},t))})})]}),a.gameCompleted&&(0,i.jsx)(p,{onComplete:()=>{g()}})]})]})}let h={id:"juego_cinco_actividad_2",title:"Tu cofre de la Intimidad",globalAudio:{title:"/audio/actividad-2/juego5/title.mp3",cofreOpen:"/audio/actividad-2/juego5/super-bright.mp3",dragDrop:"/audio/actividad-2/juego5/Drag_Drop.mp3",correctSound:"/audio/actividad-2/juego5/Game_Score.mp3",incorrectSound:"/audio/actividad-2/juego5/Game_No_Score.mp3",congratulations:"/audio/actividad-2/juego5/muybien.mp3"},globalImages:{cofreClosed:"/image/actividad_2/juego_5/cofre.png",cofreOpen:"/image/actividad_2/juego_5/cofre-open.png",checkYes:"/image/actividad_2/juego_5/check_ok.png",checkNo:"/image/actividad_2/juego_5/check_NO.png",decorationStar:"/image/actividad_2/juego_5/star_right.png",decorationStarLeft:"/image/actividad_2/juego_5/star_left.png"},backgrounds:{normal:"bg-gradient-to-b from-[#daed6c] via-[#eff4a7] to-[#fefad1]",error:"bg-gradient-to-b from-[#ff4d24] via-[#ff9462] to-[#ffefb2]"},items:[{id:"item_1",name:"carta_amor",image:"/image/actividad_2/juego_5/carta_amor.png",isPrivate:!0,audio:{click:"/audio/actividad-2/juego5/1-title.mp3",feedback:"/audio/actividad-2/juego5/1-fb.mp3"},feedbackText:{correct:"\xa1Muy bien! Una carta de amor es algo personal. Puedes decidir qui\xe9n la lee.",incorrect:"Recuerda, tu carta de amor es privada. Solo t\xfa decides qui\xe9n la lee."},position:{top:"20%",left:"15%"}},{id:"item_2",name:"cepillo",image:"/image/actividad_2/juego_5/cepillo.png",isPrivate:!0,audio:{click:"/audio/actividad-2/juego5/2-title.mp3",feedback:"/audio/actividad-2/juego5/2-fb.mp3"},feedbackText:{correct:"\xa1Muy bien! Un cepillo de dientes es algo personal. Otras personas pueden verlo en el ba\xf1o, pero no deber\xedan usarlo.",incorrect:"Recuerda, un cepillo de dientes es privado. Otras personas pueden verlo en el ba\xf1o, pero no deber\xedan usarlo."},position:{top:"15%",right:"20%"}},{id:"item_3",name:"camiseta",image:"/image/actividad_2/juego_5/camiseta.png",isPrivate:!1,audio:{click:"/audio/actividad-2/juego5/3-title.mp3",feedback:"/audio/actividad-2/juego5/3-fb.mp3"},feedbackText:{correct:"",incorrect:"Recuerda, tu camiseta no es privada. Otras personas pueden verla."},position:{bottom:"25%",left:"10%"}},{id:"item_4",name:"bragas",image:"/image/actividad_2/juego_5/bragas.png",isPrivate:!0,audio:{click:"/audio/actividad-2/juego5/4-title.mp3",feedback:"/audio/actividad-2/juego5/4-fb.mp3"},feedbackText:{correct:"\xa1Muy bien! Unas bragas/calzoncillos son algo privados. Otras personas no deben usarlos. Tampoco verlos sin tu permiso. Son solo para ti.",incorrect:"Recuerda, tus bragas/calzoncillos son privados. Solo t\xfa decides a quien ense\xf1\xe1rselos."},position:{top:"60%",right:"15%"}},{id:"item_5",name:"underwear",image:"/image/actividad_2/juego_5/underwear.png",isPrivate:!0,audio:{click:"/audio/actividad-2/juego5/5-title.mp3",feedback:"/audio/actividad-2/juego5/5-fb.mp3"},feedbackText:{correct:"\xa1Muy bien! Unas bragas/calzoncillos son algo privados. Otras personas no deben usarlos. Tampoco verlos sin tu permiso. Son solo para ti.",incorrect:"Recuerda, tus bragas/calzoncillos son privados. Solo t\xfa decides a quien ense\xf1\xe1rselos."},position:{top:"70%",left:"25%"}},{id:"item_6",name:"shoes",image:"/image/actividad_2/juego_5/shoes.png",isPrivate:!1,audio:{click:"/audio/actividad-2/juego5/6-title.mp3",feedback:"/audio/actividad-2/juego5/6-fb.mp3"},feedbackText:{correct:"",incorrect:"Recuerda, tus zapatos no son privados. Otras personas pueden verlos."},position:{bottom:"15%",right:"25%"}}],timing:{titleDuration:22e3,itemShowDelay:500,feedbackDuration:5e3,errorBackgroundDuration:5500,congratsDelay:1e3},animations:{cofreOpen:{initial:{scale:1},animate:{scale:[1,1.1,1]},transition:{duration:.6,ease:"easeOut"}},itemAppear:{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"}},itemDrag:{whileDrag:{scale:1.1,zIndex:100},transition:{duration:.2}},feedbackIcon:{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.4,ease:"easeOut"}}},dropZone:{center:{x:"50%",y:"50%"},size:{width:200,height:150},tolerance:50}},b=()=>h.items.filter(e=>e.isPrivate).length,x=()=>{let[e,t]=(0,l.useState)({phase:"intro",cofreOpen:!1,itemsVisible:!1,currentFeedback:{show:!1,isCorrect:!1,itemId:null},backgroundError:!1,gameCompleted:!1,itemStates:h.items.map(e=>({id:e.id,isInChest:!1,hasBeenTried:!1,isDisabled:!1,position:{x:0,y:0}}))}),[a,i]=(0,l.useState)({gameId:h.id,sessionId:`session_${Date.now()}`,startTime:new Date,completed:!1,totalItems:h.items.length,correctItems:0,incorrectAttempts:0,finalScore:0}),o=(0,l.useRef)(null),s=(0,l.useRef)([]),r=(0,l.useCallback)(e=>new Promise(t=>{o.current&&(o.current.pause(),o.current=null);let a=new Audio(e);o.current=a,a.onended=()=>{o.current=null,t()},a.onerror=()=>{console.warn("Audio failed to load:",e),o.current=null,t()},a.play().catch(()=>{console.warn("Audio failed to play:",e),o.current=null,t()})}),[]),n=(0,l.useCallback)(e=>{try{let t=new Audio(e);t.volume=.7,t.play().catch(console.warn)}catch(e){console.warn("Could not play sound:",e)}},[]),c=(0,l.useCallback)(async()=>{console.log("Starting game - playing title audio, chest should stay closed"),i(e=>({...e,startTime:new Date})),t(e=>({...e,phase:"intro",cofreOpen:!1,itemsVisible:!1})),await r(h.globalAudio.title),console.log("Title audio finished, now opening chest and showing items"),t(e=>({...e,cofreOpen:!0,phase:"playing",itemsVisible:!0})),n(h.globalAudio.cofreOpen)},[r,n]),d=(0,l.useCallback)(t=>{let a=h.items.find(e=>e.id===t),i=e.itemStates.find(e=>e.id===t);a&&i&&!i.isDisabled&&"playing"===e.phase&&n(a.audio.click)},[e.itemStates,e.phase,n]),u=(0,l.useCallback)(async a=>{let o=h.items.find(e=>e.id===a),c=e.itemStates.find(e=>e.id===a);if(!o||!c||c.isDisabled||"playing"!==e.phase){console.log("Cannot drop item:",{item:!!o,itemState:!!c,disabled:c?.isDisabled,phase:e.phase});return}console.log("Dropping item:",a,"isPrivate:",o.isPrivate),n(h.globalAudio.dragDrop),t(e=>({...e,phase:"feedback"}));let l=o.isPrivate;if(i(e=>({...e,correctItems:l?e.correctItems+1:e.correctItems,incorrectAttempts:l?e.incorrectAttempts:e.incorrectAttempts+1})),l)t(e=>({...e,itemStates:e.itemStates.map(e=>e.id===a?{...e,isInChest:!0,hasBeenTried:!0,isDisabled:!0}:e),currentFeedback:{show:!0,isCorrect:!0,itemId:a}})),n(h.globalAudio.correctSound),await r(o.audio.feedback);else{t(e=>({...e,itemStates:e.itemStates.map(e=>e.id===a?{...e,hasBeenTried:!0,isDisabled:!0}:e),currentFeedback:{show:!0,isCorrect:!1,itemId:a},backgroundError:!0})),n(h.globalAudio.incorrectSound),await r(o.audio.feedback);let e=setTimeout(()=>{t(e=>({...e,backgroundError:!1}))},h.timing.errorBackgroundDuration);s.current.push(e)}let d=setTimeout(()=>{t(e=>{let t={...e,currentFeedback:{show:!1,isCorrect:!1,itemId:null},phase:"playing"},a=e.itemStates.filter(e=>e.isInChest&&h.items.find(t=>t.id===e.id)?.isPrivate).length,o=b();return a===o&&(t.gameCompleted=!0,t.phase="completed",i(e=>({...e,completed:!0,endTime:new Date,finalScore:Math.round(e.correctItems/o*100)}))),t})},h.timing.feedbackDuration);s.current.push(d)},[e.itemStates,e.phase,r,n]),m=(0,l.useCallback)(e=>h.items.find(t=>t.id===e),[]),p=(0,l.useCallback)(t=>e.itemStates.find(e=>e.id===t),[e.itemStates]),g=(0,l.useCallback)(t=>{let a=p(t),i=a&&!a.isDisabled&&!a.isInChest&&"playing"===e.phase;return console.log("Can drag item:",t,i,{hasState:!!a,disabled:a?.isDisabled,inChest:a?.isInChest,phase:e.phase}),i},[p,e.phase]),x=(0,l.useCallback)(()=>{o.current&&o.current.pause(),s.current.forEach(e=>clearTimeout(e)),s.current=[],t({phase:"intro",cofreOpen:!1,itemsVisible:!1,currentFeedback:{show:!1,isCorrect:!1,itemId:null},backgroundError:!1,gameCompleted:!1,itemStates:h.items.map(e=>({id:e.id,isInChest:!1,hasBeenTried:!1,isDisabled:!1,position:{x:0,y:0}}))}),i({gameId:h.id,sessionId:`session_${Date.now()}`,startTime:new Date,completed:!1,totalItems:h.items.length,correctItems:0,incorrectAttempts:0,finalScore:0})},[]);return(0,l.useEffect)(()=>()=>{o.current&&o.current.pause(),s.current.forEach(e=>clearTimeout(e)),s.current=[]},[]),{gameState:e,sessionData:a,startGame:c,handleItemClick:d,handleItemDrop:u,getItemById:m,getItemStateById:p,canDragItem:g,resetGame:x,config:h}},f={animate:{scale:[0,1.5,0],opacity:[0,1,0],transition:{duration:1.2,repeat:1/0,ease:"easeInOut"}}},v=({onComplete:e})=>{let t=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{t.current||(t.current=!0,new Audio("/audio/actividad-2/juego5/muybien.mp3").play().catch(console.warn));let a=setTimeout(()=>{e()},2e3);return()=>clearTimeout(a)},[e]),(0,i.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50 pointer-events-none",children:(0,i.jsxs)("div",{className:"relative w-full h-full",children:[[...Array(25)].map((e,t)=>(0,i.jsx)(o.P.div,{className:"absolute w-4 h-4 bg-yellow-300 rounded-full",style:{top:`${100*Math.random()}%`,left:`${100*Math.random()}%`},variants:f,animate:"animate"},t)),(0,i.jsx)(o.P.div,{className:"absolute top-1/2 left-1/2 text-white text-5xl font-bold drop-shadow-xl",style:{transform:"translate(-50%, -50%)"},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"easeOut"},children:"\uD83C\uDF89 \xa1Muy bien!"})]})})};function j({isOpen:e,onClose:t}){let{gameState:a,startGame:r,handleItemClick:n,handleItemDrop:c,getItemById:l,getItemStateById:d,canDragItem:u,resetGame:m,config:p}=x();if(!e)return null;let g=()=>{m(),t()},h=(e,t,a)=>{let{point:i}=t;console.log("Drag ended for item:",a,"at point:",i);let o=document.querySelector('[data-chest="true"]');if(!o){console.log("Chest element not found");return}let s=o.getBoundingClientRect(),r=s.left+s.width/2,n=s.top+s.height/2,l=Math.sqrt(Math.pow(i.x-r,2)+Math.pow(i.y-n,2));console.log("Distance to chest center:",l,"Chest bounds:",s),l<250?(console.log("Item dropped in chest:",a),c(a)):console.log("Item dropped outside chest, distance:",l)};return(0,i.jsxs)(o.P.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[(0,i.jsx)(o.P.div,{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},onClick:g}),(0,i.jsxs)(o.P.div,{className:`relative w-full max-w-[1000px] max-h-[800px] h-full rounded-2xl shadow-2xl overflow-hidden transition-all duration-500 ${a.backgroundError?p.backgrounds.error:p.backgrounds.normal}`,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3,ease:"easeOut"},children:[(0,i.jsx)("img",{src:p.globalImages.decorationStar,alt:"Decoration",className:"absolute bottom-4 right-4 w-28 h-28 "}),(0,i.jsx)("img",{src:p.globalImages.decorationStarLeft,alt:"Decoration",className:"absolute top-4 left-4  w-28 h-28 "}),(0,i.jsx)("button",{onClick:g,className:"absolute top-4 right-4 z-10 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg shadow-lg flex items-center justify-center transition-all duration-200 hover:scale-105 font-semibold",children:"Salir juego"}),(0,i.jsxs)("div",{className:"relative w-full h-full p-6 pt-16",children:[(0,i.jsxs)("div",{className:"absolute top-2 left-2 text-xs bg-black text-white p-2 z-50 rounded",children:["Phase: ",a.phase," | Chest: ",a.cofreOpen.toString()," | Items: ",a.itemsVisible.toString(),(0,i.jsx)("br",{}),"In Chest: ",a.itemStates.filter(e=>e.isInChest).map(e=>e.id).join(", ")]}),"intro"===a.phase&&(0,i.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:p.title}),(0,i.jsx)("div",{className:"text-lg text-gray-600 mb-8",children:"Escuchando las instrucciones..."}),(0,i.jsx)("img",{src:p.globalImages.cofreClosed,alt:"Cofre cerrado",className:"mx-auto max-h-[300px] object-contain"})]})}),"intro"!==a.phase&&(0,i.jsxs)("div",{className:"relative w-full h-full",children:[(0,i.jsxs)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:[(0,i.jsx)(s.N,{mode:"wait",children:a.gameCompleted?(0,i.jsx)(o.P.img,{src:p.globalImages.cofreClosed,alt:"Cofre cerrado","data-chest":"true",className:"max-h-[300px] object-contain",initial:{scale:1.1,rotateY:0},animate:{scale:[1.1,.95,1],rotateY:[0,-5,5,0]},transition:{duration:.8,ease:"easeInOut",times:[0,.5,1]}},"chest-closed"):(0,i.jsx)(o.P.img,{src:p.globalImages.cofreOpen,alt:"Cofre abierto","data-chest":"true",className:"max-h-[300px] object-contain",initial:{scale:1},animate:{scale:[1,1.1,1]},transition:{duration:.6,ease:"easeOut"},exit:{scale:.9,rotateY:10,transition:{duration:.4}}},"chest-open")}),!a.gameCompleted&&"completed"!==a.phase&&(0,i.jsx)(s.N,{children:(0,i.jsx)(o.P.div,{className:"absolute inset-0 flex flex-wrap justify-center items-center p-4",exit:{opacity:0,scale:.5,transition:{duration:.5,ease:"easeInOut"}},children:a.itemStates.filter(e=>e.isInChest).map((e,t)=>{let s=l(e.id);return s?(console.log(`Rendering item in chest: ${s.id}, isPrivate: ${s.isPrivate}, gameCompleted: ${a.gameCompleted}`),(0,i.jsx)(o.P.img,{src:s.image,alt:`${s.name} in chest`,className:"w-16 h-16 object-contain m-1",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0,transition:{duration:.4,ease:"easeInOut",delay:.1*t}},transition:{delay:.05*t,duration:.3,ease:"easeOut"}},`chest-${e.id}`)):null})},"chest-items-container")})]}),(0,i.jsx)(s.N,{mode:"popLayout",children:a.itemsVisible&&!a.gameCompleted&&p.items.map((e,t)=>{let s=d(e.id);if(!s||s.isInChest||a.gameCompleted)return console.log(`Item ${e.id} not rendered - inChest: ${s?.isInChest}, gameCompleted: ${a.gameCompleted}`),null;let r=u(e.id);return(0,i.jsxs)(o.P.div,{className:`absolute ${r?"cursor-grab":"cursor-not-allowed"}`,style:e.position,initial:p.animations.itemAppear.initial,animate:p.animations.itemAppear.animate,exit:{opacity:0,scale:0,transition:{duration:.2}},transition:{...p.animations.itemAppear.transition,delay:.2*t},drag:r,dragMomentum:!1,dragConstraints:{left:-window.innerWidth/4,right:window.innerWidth/4,top:-window.innerHeight/4,bottom:window.innerHeight/4},onDragStart:()=>{console.log("Started dragging:",e.id)},onDragEnd:(t,a)=>{console.log("Ended dragging:",e.id),h(t,a,e.id)},onPointerDown:()=>n(e.id),onClick:()=>{},whileDrag:{...p.animations.itemDrag.whileDrag,cursor:"grabbing"},whileHover:{scale:r?1.05:1,cursor:r?"grab":"not-allowed"},children:[(0,i.jsx)("img",{src:e.image,alt:e.name,className:`max-h-[80px] object-contain transition-all duration-200 ${s.isDisabled?"opacity-50":"opacity-100"} select-none pointer-events-none`,draggable:!1}),s.isDisabled&&!s.isInChest&&(0,i.jsx)("div",{className:"absolute inset-0 bg-red-500 bg-opacity-40 rounded-lg pointer-events-none"})]},`draggable-${e.id}`)})}),(0,i.jsx)(s.N,{children:a.currentFeedback.show&&(0,i.jsx)(o.P.div,{className:"absolute bottom-20 inset-0 z-30 pointer-events-none flex justify-center",...p.animations.feedbackIcon,children:(0,i.jsx)("img",{src:a.currentFeedback.isCorrect?p.globalImages.checkYes:p.globalImages.checkNo,alt:a.currentFeedback.isCorrect?"Correcto":"Incorrecto",className:"w-32 h-32 object-contain"})})})]}),"intro"!==a.phase&&"completed"!==a.phase&&(0,i.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:(0,i.jsx)("div",{className:"flex space-x-2",children:p.items.filter(e=>e.isPrivate).map(e=>{let t=d(e.id);return(0,i.jsx)("div",{className:`w-3 h-3 rounded-full transition-colors duration-200 ${t?.isInChest?"bg-green-500":"bg-gray-300"}`},e.id)})})})]}),(0,i.jsx)(s.N,{children:a.gameCompleted&&(0,i.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.5},children:(0,i.jsx)(v,{onComplete:()=>{g()}})})})]})]})}function y(){let e=(0,r.useRouter)(),t=(0,l.useRef)(null);(0,l.useRef)(null);let[a,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!1),[b,x]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1),[y,w]=(0,l.useState)(!1),[_,k]=(0,l.useState)(!1),[C,N]=(0,l.useState)(!1),[I,S]=(0,l.useState)(!1),[D,A]=(0,l.useState)({width:0,height:0}),[P,T]=(0,l.useState)({width:0,height:0}),O={width:`${D.width}px`,height:`${D.height}px`,left:`${(P.width-D.width)/2}px`,top:`${(P.height-D.height)/2}px`},$=()=>{try{let e=new Audio("/audio/button/Bright.mp3");e.volume=.7,e.play().catch(console.warn)}catch(e){console.warn("Could not play sound:",e)}};return C?(0,i.jsxs)(o.P.div,{className:"relative min-h-screen overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},style:{backgroundImage:"url('/image/actividad_2/bg.png')",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-black/20 z-0"}),(0,i.jsx)("div",{className:"absolute top-0 right-0 z-50 flex",children:(0,i.jsx)(n.A,{})}),(0,i.jsx)("div",{className:"relative z-20 flex flex-col items-center justify-center min-h-screen p-4",children:(0,i.jsx)(s.N,{mode:"wait",children:I?(0,i.jsxs)(o.P.div,{className:"flex flex-col items-center text-center",initial:{opacity:0,scale:.5,y:50},animate:{opacity:1,scale:1,y:0},transition:{duration:1,ease:"easeOut"},children:[(0,i.jsxs)(o.P.div,{className:"bg-gradient-to-r from-yellow-400 via-orange-400 to-red-400 rounded-3xl p-8 shadow-2xl mb-8",initial:{rotate:-5},animate:{rotate:[0,2,-2,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[(0,i.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-white mb-4 drop-shadow-lg",children:"\xa1Felicidades!"}),(0,i.jsx)("p",{className:"text-xl sm:text-2xl text-white/90 font-semibold",children:"Acabaste la a Actividad 2"})]}),[...Array(15)].map((e,t)=>(0,i.jsx)(o.P.div,{className:"absolute w-4 h-4 bg-yellow-300 rounded-full",style:{left:`${100*Math.random()}%`,top:`${100*Math.random()}%`},animate:{scale:[0,1.5,0],opacity:[0,1,0],rotate:[0,180,360]},transition:{duration:2,repeat:1/0,delay:2*Math.random(),ease:"easeInOut"}},t)),(0,i.jsx)(o.P.button,{onClick:()=>{$(),console.log("Going to next level..."),e.push("/actividad-1")},className:"bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-bold py-4 px-8 rounded-full shadow-lg transform transition-all duration-200 hover:scale-105 active:scale-95",whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},children:(0,i.jsx)("span",{className:"text-xl sm:text-2xl",children:"Ir al Siguiente Nivel"})})]},"congratulations"):(0,i.jsx)(o.P.div,{className:"flex flex-col items-center justify-end min-h-screen pb-0",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:2.5,z:100,transition:{duration:1.2,ease:"easeInOut",opacity:{duration:.8,delay:.4}}},transition:{duration:.8,ease:"easeOut"},children:(0,i.jsx)("div",{className:"w-full flex justify-center items-end",style:{height:"70vh",minHeight:"400px"},children:(0,i.jsx)("img",{src:"/image/alex-talk.gif",alt:"Alex hablando",className:"object-contain object-bottom",style:{height:"80%",width:"auto",transform:"scale(2)",transformOrigin:"bottom center"}})})},"alex-talking")})})]}):(0,i.jsxs)(o.P.div,{className:"relative min-h-screen overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[(0,i.jsx)("div",{className:`absolute inset-0 bg-gradient-to-b from-blue-400 via-blue-300 to-purple-300 z-0 ${u?"opacity-0":"opacity-100"} transition-opacity duration-300`}),!p&&!b&&(0,i.jsx)("div",{className:`absolute inset-0 z-10 ${u?"opacity-0":"opacity-100"} transition-opacity duration-300`,children:[...Array(20)].map((e,t)=>(0,i.jsx)(o.P.div,{className:"absolute rounded-full bg-white/10",style:{width:60*Math.random()+20,height:60*Math.random()+20,left:`${100*Math.random()}%`,top:`${100*Math.random()}%`},animate:{y:[0,-20,0],x:[0,20*Math.random()-10,0],scale:[1,1.1,1]},transition:{duration:3*Math.random()+2,repeat:1/0,ease:"easeInOut",delay:2*Math.random()}},t))}),(0,i.jsx)("div",{className:"absolute top-0 right-0 z-50 flex",children:(0,i.jsx)(n.A,{})}),(!u||f)&&!p&&!b&&!(y&&_)&&(0,i.jsx)("div",{className:"relative z-20 flex items-center justify-center min-h-screen",children:(0,i.jsx)(o.P.div,{animate:a?{scale:[1,1.3,1],rotate:[0,-360]}:{},transition:{duration:.8,ease:"easeInOut"},children:(0,i.jsx)(c.A,{onClick:()=>{a||(d(!0),$(),setTimeout(()=>{d(!1),f?y?_||x(!0):h(!0):m(!0)},800))},disabled:a})})}),u&&(0,i.jsx)("div",{className:"absolute",style:O,children:(0,i.jsx)("video",{ref:t,className:"absolute inset-0 w-full h-full object-cover z-20",src:"/video/ACTIVIDAD-2-ESCENA-4.mp4",autoPlay:!0,playsInline:!0,onEnded:()=>{v(!0),m(!1)}})}),p&&(0,i.jsx)(g,{isOpen:p,onClose:()=>{h(!1),w(!0)}}),b&&(0,i.jsx)(j,{isOpen:b,onClose:()=>{x(!1),k(!0)}})]})}},7611:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let i=(0,a(2771).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/c/Users/ian.gilmore/Documents/repo/edu-div-sex/apps/web/src/app/actividad-2/scene4/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/c/Users/ian.gilmore/Documents/repo/edu-div-sex/apps/web/src/app/actividad-2/scene4/page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[207,619,178,40,165,772],()=>a(8567));module.exports=i})();