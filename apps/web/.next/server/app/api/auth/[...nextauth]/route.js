(()=>{var e={};e.id=14,e.ids=[14],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5511:e=>{"use strict";e.exports=require("crypto")},4939:e=>{"use strict";e.exports=import("pg")},4573:e=>{"use strict";e.exports=require("node:buffer")},5217:e=>{"use strict";e.exports=require("node:crypto")},7975:e=>{"use strict";e.exports=require("node:util")},9665:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{patchFetch:()=>c,routeModule:()=>l,serverHooks:()=>f,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>p});var a=r(1271),s=r(1232),i=r(8079),u=r(8793),o=e([u]);u=(o.then?(await o)():o)[0];let l=new a.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/auth/[...nextauth]/route",pathname:"/api/auth/[...nextauth]",filename:"route",bundlePath:"app/api/auth/[...nextauth]/route"},resolvedPagePath:"/mnt/c/Users/ian.gilmore/Documents/repo/edu-div-sex/apps/web/src/app/api/auth/[...nextauth]/route.ts",nextConfigOutput:"",userland:u}),{workAsyncStorage:d,workUnitAsyncStorage:p,serverHooks:f}=l;function c(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:p})}n()}catch(e){n(e)}})},7032:()=>{},408:()=>{},8793:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{GET:()=>i,POST:()=>u});var a=r(6712),s=e([a]);let{GET:i,POST:u}=(a=(s.then?(await s)():s)[0]).Y9;n()}catch(e){n(e)}})},6712:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{Jv:()=>y,Y9:()=>p});var a=r(2466),s=r(5198),i=r(1041),u=r(4465),o=r(8483),c=r(8180),l=e([c]);c=(l.then?(await l)():l)[0];let{handlers:p,auth:f,signIn:y,signOut:h}=(0,a.Ay)({session:{strategy:"jwt"},providers:[(0,i.A)({credentials:{email:{},password:{}},authorize:async e=>{try{let t=null,{email:r,password:n}=await u.a.parseAsync(e);if(!(t=await d(r,n)))throw Error("Invalid credentials.");return{id:t.id,email:t.email,name:t.name}}catch(e){return s.G,null}}})],callbacks:{redirect:async({baseUrl:e})=>`${e}/home`,session:async({session:e,token:t})=>(t&&e.user&&(e.user.id=t.sub),e)}});async function d(e,t){try{let r=await (0,c.P)("SELECT id, email, name, password_hash FROM users WHERE email = $1",[e]);if(0===r.rows.length)return null;let n=r.rows[0];if(!await o.Ay.compare(t,n.password_hash))return null;return{id:n.id.toString(),email:n.email,name:n.name}}catch(e){return console.error("Database error:",e),null}}n()}catch(e){n(e)}})},8180:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{P:()=>i});var a=r(4939),s=e([a]);let u=new(a=(s.then?(await s)():s)[0]).Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}});async function i(e,t){let r=await u.connect();try{return await r.query(e,t)}finally{r.release()}}n()}catch(e){n(e)}})},4465:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var n=r(5198);let a=(0,n.Ik)({email:(0,n.Yj)({required_error:"Email is required"}).min(1,"Email is required").email("Invalid email"),password:(0,n.Yj)({required_error:"Password is required"}).min(1,"Password is required").min(8,"Password must be more than 8 characters").max(32,"Password must be less than 32 characters")})},8312:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HTTPAccessErrorStatus:function(){return r},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return a},getAccessFallbackErrorTypeByStatus:function(){return u},getAccessFallbackHTTPStatus:function(){return i},isHTTPAccessFallbackError:function(){return s}});let r={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},n=new Set(Object.values(r)),a="NEXT_HTTP_ERROR_FALLBACK";function s(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===a&&n.has(Number(r))}function i(e){return Number(e.digest.split(";")[1])}function u(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return o}});let n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(void 0);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=s?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(2728));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}let s={current:null},i="function"==typeof n.cache?n.cache:e=>e,u=console.warn;function o(e){return function(...t){u(e(...t))}}i(e=>{try{u(s.current)}finally{s.current=null}})},1271:(e,t,r)=>{"use strict";e.exports=r(4870)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[207,238,828],()=>r(9665));module.exports=n})();